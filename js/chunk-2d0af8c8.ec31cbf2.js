(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af8c8"],{"0f95":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-text-field",{staticClass:"ml-3 mr-3",attrs:{label:"Search Enrolments",color:"accent"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),a("v-btn",{staticClass:"addBtn mr-3 mt-4 float-right",on:{click:function(e){return t.add()}}},[t._v("Add")])],1),a("v-divider",{staticClass:"mt-3"}),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[a("v-switch",{attrs:{label:"Expand All",color:"accent"},model:{value:t.expandToggle,callback:function(e){t.expandToggle=e},expression:"expandToggle"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[a("v-switch",{attrs:{label:"Filter By Lecturer",color:"accent"},model:{value:t.filterToggle,callback:function(e){t.filterToggle=e},expression:"filterToggle"}})],1),a("v-spacer"),a("div",{staticClass:"mt-7 mr-3"},[a("span",{staticClass:"mr-4 grey--text"},[t._v("Page "+t._s(t.page)+" of "+t._s(t.numberOfPages))]),a("v-btn",{staticClass:"mr-1 black--text",attrs:{dark:"",color:"accent"},on:{click:t.formerPage}},[a("v-icon",[t._v("mdi-chevron-left")])],1),a("v-btn",{staticClass:"ml-1 black--text",attrs:{dark:"",color:"accent"},on:{click:t.nextPage}},[a("v-icon",[t._v("mdi-chevron-right")])],1)],1)],1),a("v-divider",{staticClass:"mb-5"}),a("v-data-iterator",{attrs:{items:t.filtered,"item-key":"id","items-per-page":t.itemsPerPage,"hide-default-footer":"",expanded:t.expanded,page:t.page},on:{"update:page":function(e){t.page=e}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.items,s=e.isExpanded,i=e.expand;return[a("v-row",t._l(n,(function(e,n){return a("v-col",{key:e.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[a("v-card",[a("v-card-title",[a("h4",[t._v(t._s(e.course.title))]),a("hr"),a("small",[t._v(t._s(e.lecturer.name))])]),a("v-switch",{staticClass:"pl-4 mt-0",attrs:{"input-value":s(e),label:s(e)?"Expanded":"Closed",color:"accent"},on:{change:function(t){return i(e,t)}}}),a("v-divider"),a("v-item-group",{staticClass:"d-flex justify-space-between btnGroup pa-2"},[a("v-btn",{staticClass:"v-btn--outlined viewBtn",on:{click:function(a){return t.view(e)}}},[t._v("View")]),a("v-btn",{staticClass:"v-btn--outlined editBtn",on:{click:function(a){return t.edit(e)}}},[t._v("Edit")]),a("v-btn",{staticClass:"v-btn--outlined deleteBtn",on:{click:function(a){return t.delDialog(e,n)}}},[t._v("Delete")])],1),a("v-divider"),s(e)?a("v-list",{attrs:{dense:""}},[a("v-list-item-subtitle",{staticClass:"ml-4 accent--text"},[t._v("Course")]),a("v-list-item",[a("v-list-item-content",{staticClass:"align-end"},[a("span",[t._v(t._s(e.course.title)+" "),a("sup",[t._v("["+t._s(e.course.id)+"]")])])])],1),a("v-list-item-subtitle",{staticClass:"ml-4 mt-2 accent--text"},[t._v("Lecturer")]),a("v-list-item",[a("v-list-item-content",{staticClass:"align-end"},[a("span",[t._v(t._s(e.lecturer.name)+" "),a("sup",[t._v("["+t._s(e.lecturer.id)+"]")])])])],1),a("v-list-item-subtitle",{staticClass:"ml-4 mt-2 accent--text"},[t._v("Status")]),a("v-list-item",[a("v-list-item-content",{staticClass:"align-end"},[t._v(" "+t._s(e.status)+" ")])],1),a("v-list-item-subtitle",{staticClass:"ml-4 mt-2 accent--text"},[t._v("Date")]),a("v-list-item",[a("v-list-item-content",{staticClass:"align-end"},[t._v(" "+t._s(e.date)+" ")])],1),a("v-list-item-subtitle",{staticClass:"ml-4 mt-2 accent--text"},[t._v("Time")]),a("v-list-item",[a("v-list-item-content",{staticClass:"align-end"},[t._v(" "+t._s(e.time)+" ")])],1)],1):t._e()],1)],1)})),1),t.dialog?a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"800"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{staticClass:"unselectable pa-3"},[a("v-card-title",{staticClass:"text-h5 mb-2 justify-center"},[t._v("Are you sure? ðŸ˜¬")]),a("v-card-text",{staticClass:"text-center"},[t._v("This will permanently delete the")]),a("v-card-text",{staticClass:"text-center"},[a("b",[t._v(t._s(t.clickedEnrolment.course.title))])]),a("v-card-text",{staticClass:"text-center text-h5"},[t._v("â†•")]),a("v-card-text",{staticClass:"text-center"},[a("b",[t._v(t._s(t.clickedEnrolment.lecturer.name))])]),a("v-card-text",{staticClass:"text-center"},[t._v("enrolment from the API...")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Go back! ")]),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1,t.del(t.clickedEnrolment,t.clickedIndex)}}},[t._v(" Delete it! ")])],1)],1)],1)],1):t._e()]}}])})],1)},s=[],i=(a("4de4"),a("d3b7"),a("caad"),a("2532"),a("b0c0"),a("a434"),a("99af"),a("8647")),l={name:"EnrolmentsIndex",title:"Enrolments â€¢ RESTful College",components:{},data:function(){return{enrolments:[],searchQuery:"",filterToggle:!1,expandToggle:!1,expand:[],page:1,itemsPerPage:12,dialog:!1,clickedEnrolment:{},clickedIndex:null}},computed:{filtered:function(){var t=this;return this.enrolments.filter((function(e){return t.filterToggle?e.lecturer.name.toLowerCase().includes(t.searchQuery.toLowerCase()):e.course.title.toLowerCase().includes(t.searchQuery.toLowerCase())}))},expanded:function(){return this.expandToggle?this.filtered:[]},numberOfPages:function(){return Math.ceil(this.filtered.length/this.itemsPerPage)}},mounted:function(){this.getData()},methods:{getData:function(){var t=this,e=localStorage.getItem("token");i["a"].get("enrolments",{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){t.enrolments=e.data.data})).catch((function(t){}))},view:function(t){this.$router.push({name:"Enrolment Viewer",params:{id:t.id}})},edit:function(t){this.$router.push({name:"Enrolment Editor",params:{id:t.id}})},delDialog:function(t,e){this.dialog=!this.dialog,this.clickedEnrolment=t,this.clickedIndex=this.realIndex(e)},del:function(t,e){var a=this,n=localStorage.getItem("token");i["a"].delete("enrolments/".concat(t.id),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(n){a.enrolments.splice(e,1),alert("Enrolment with course: ".concat(t.course.title," / lecturer ").concat(t.lecturer.name," has been deleted successfully!"))})).catch((function(e){alert("Enrolment with course: ".concat(t.course.title," / lecturer ").concat(t.lecturer.name," failed to be deleted."))}))},add:function(){this.$router.push({name:"Add Enrolment"})},nextPage:function(){this.page+1<=this.numberOfPages&&(this.page+=1)},formerPage:function(){this.page-1>=1&&(this.page-=1)},realIndex:function(t){var e=t+(this.page-1)*this.itemsPerPage;return e}}},c=l,r=a("2877"),o=Object(r["a"])(c,n,s,!1,null,null,null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0af8c8.ec31cbf2.js.map