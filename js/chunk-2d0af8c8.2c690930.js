(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af8c8"],{"0f95":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-text-field",{staticClass:"ml-3 mr-3",attrs:{label:"Search Enrolments",color:"accent"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),n("v-btn",{staticClass:"addBtn mr-3 mt-4 float-right",on:{click:function(t){return e.add()}}},[e._v("Add")])],1),n("v-divider",{staticClass:"mt-3"}),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[n("v-switch",{attrs:{label:"Expand All",color:"accent"},model:{value:e.expandToggle,callback:function(t){e.expandToggle=t},expression:"expandToggle"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[n("v-switch",{attrs:{label:"Filter By Lecturer",color:"accent"},model:{value:e.filterToggle,callback:function(t){e.filterToggle=t},expression:"filterToggle"}})],1),n("v-spacer"),n("div",{staticClass:"mt-7 mr-3"},[n("span",{staticClass:"mr-4 grey--text"},[e._v("Page "+e._s(e.page)+" of "+e._s(e.numberOfPages))]),n("v-btn",{staticClass:"mr-1 black--text",attrs:{dark:"",color:"accent"},on:{click:e.formerPage}},[n("v-icon",[e._v("mdi-chevron-left")])],1),n("v-btn",{staticClass:"ml-1 black--text",attrs:{dark:"",color:"accent"},on:{click:e.nextPage}},[n("v-icon",[e._v("mdi-chevron-right")])],1)],1)],1),n("v-divider",{staticClass:"mb-5"}),n("v-data-iterator",{attrs:{items:e.filtered,"item-key":"id","items-per-page":e.itemsPerPage,"hide-default-footer":"",expanded:e.expanded,page:e.page},on:{"update:page":function(t){e.page=t}},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.items,l=t.isExpanded,s=t.expand;return[n("v-row",e._l(a,(function(t,a){return n("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[n("v-card",[n("v-card-title",[n("h4",[e._v(e._s(t.course.title))]),n("hr"),n("small",[e._v(e._s(t.lecturer.name))])]),n("v-switch",{staticClass:"pl-4 mt-0",attrs:{"input-value":l(t),label:l(t)?"Expanded":"Closed",color:"accent"},on:{change:function(e){return s(t,e)}}}),n("v-divider"),n("v-item-group",{staticClass:"d-flex justify-space-between btnGroup pa-2"},[n("v-btn",{staticClass:"v-btn--outlined viewBtn",on:{click:function(n){return e.view(t)}}},[e._v("View")]),n("v-btn",{staticClass:"v-btn--outlined editBtn",on:{click:function(n){return e.edit(t)}}},[e._v("Edit")]),n("v-btn",{staticClass:"v-btn--outlined deleteBtn",on:{click:function(n){return e.delDialog(t,a)}}},[e._v("Delete")])],1),n("v-divider"),l(t)?n("v-list",{attrs:{dense:""}},[n("v-list-item-subtitle",{staticClass:"ml-4 accent--text"},[e._v("Course")]),n("v-list-item",[n("v-list-item-content",{staticClass:"align-end"},[n("span",[e._v(e._s(t.course.title)+" "),n("sup",[e._v("["+e._s(t.course.id)+"]")])])])],1),n("v-list-item-subtitle",{staticClass:"ml-4 mt-2 accent--text"},[e._v("Lecturer")]),n("v-list-item",[n("v-list-item-content",{staticClass:"align-end"},[n("span",[e._v(e._s(t.lecturer.name)+" "),n("sup",[e._v("["+e._s(t.lecturer.id)+"]")])])])],1),n("v-list-item-subtitle",{staticClass:"ml-4 mt-2 accent--text"},[e._v("Status")]),n("v-list-item",[n("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.status)+" ")])],1),n("v-list-item-subtitle",{staticClass:"ml-4 mt-2 accent--text"},[e._v("Date")]),n("v-list-item",[n("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.date)+" ")])],1),n("v-list-item-subtitle",{staticClass:"ml-4 mt-2 accent--text"},[e._v("Time")]),n("v-list-item",[n("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.time)+" ")])],1)],1):e._e()],1)],1)})),1),e.dialog?n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("Are you sure? ðŸ˜¬")]),n("v-card-text",[e._v("This will permanently delete the "+e._s(e.clickedEnrolment.course.title)+" // "+e._s(e.clickedEnrolment.lecturer.name)+" enrolment from the API...")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Go back! ")]),n("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialog=!1,e.del(e.clickedEnrolment,e.clickedIndex)}}},[e._v(" Delete it! ")])],1)],1)],1)],1):e._e()]}}])})],1)},l=[],s=(n("4de4"),n("d3b7"),n("caad"),n("2532"),n("b0c0"),n("a434"),n("99af"),n("8647")),i={name:"EnrolmentsIndex",components:{},data:function(){return{enrolments:[],searchQuery:"",filterToggle:!1,expandToggle:!1,expand:[],page:1,itemsPerPage:12,dialog:!1,clickedEnrolment:{},clickedIndex:null}},computed:{filtered:function(){var e=this;return this.enrolments.filter((function(t){return e.filterToggle?t.lecturer.name.toLowerCase().includes(e.searchQuery.toLowerCase()):t.course.title.toLowerCase().includes(e.searchQuery.toLowerCase())}))},expanded:function(){return this.expandToggle?this.filtered:[]},numberOfPages:function(){return Math.ceil(this.filtered.length/this.itemsPerPage)}},mounted:function(){this.getData()},methods:{getData:function(){var e=this,t=localStorage.getItem("token");s["a"].get("enrolments",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){console.log("getData() response: ",t.data.data),e.enrolments=t.data.data})).catch((function(e){return console.log("getData() error caught: ",e)}))},view:function(e){this.$router.push({name:"Enrolment Viewer",params:{id:e.id}})},edit:function(e){this.$router.push({name:"Enrolment Editor",params:{id:e.id}})},delDialog:function(e,t){this.dialog=!this.dialog,this.clickedEnrolment=e,console.log("delDialog(enrolment):",e),this.clickedIndex=this.realIndex(t),console.log("delDialog(index):",this.realIndex(t))},del:function(e,t){var n=this;console.log("del() Enrolment data: ",e),console.log("del() Index data: ",t);var a=localStorage.getItem("token");s["a"].delete("enrolments/".concat(e.id),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(a){console.log("del() response: ",a.data.status),n.enrolments.splice(t,1),alert("Enrolment with course: ".concat(e.course.title," / lecturer ").concat(e.lecturer.name," has been deleted successfully!"))})).catch((function(t){console.log("del() error caught: ",t),alert("Enrolment with course: ".concat(e.course.title," / lecturer ").concat(e.lecturer.name," failed to be deleted."))}))},add:function(){this.$router.push({name:"Add Enrolment"})},nextPage:function(){this.page+1<=this.numberOfPages&&(this.page+=1)},formerPage:function(){this.page-1>=1&&(this.page-=1)},realIndex:function(e){var t=e+(this.page-1)*this.itemsPerPage;return t}}},r=i,c=n("2877"),o=Object(c["a"])(r,a,l,!1,null,null,null);t["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d0af8c8.2c690930.js.map