(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b5fa5"],{"1acb":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-text-field",{staticClass:"ml-3 mr-3",attrs:{label:"Search Courses",color:"accent"},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}}),a("v-btn",{staticClass:"addBtn mr-3 mt-4 float-right",on:{click:function(e){return t.add()}}},[t._v("Add")])],1),a("v-row",t._l(t.filtered,(function(e,s){return a("v-col",{key:e.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[a("v-card",{attrs:{elevation:"2",outlined:"",color:"secondary"}},[a("router-link",{attrs:{to:{name:"Course Viewer",params:{id:e.id}}}},[a("v-card-title",[t._v(t._s(e.title))])],1),a("v-card-text",[t._v("Code: "+t._s(e.code))]),a("v-card-text",[t._v("Level: "+t._s(e.level))]),a("v-card-text",[t._v("Points: "+t._s(e.points))]),a("v-item-group",{staticClass:"d-flex justify-space-between btnGroup pa-2"},[a("v-btn",{staticClass:"v-btn--outlined viewBtn",on:{click:function(a){return t.view(e)}}},[t._v("View")]),a("v-btn",{staticClass:"v-btn--outlined editBtn",on:{click:function(a){return t.edit(e)}}},[t._v("Edit")]),a("v-btn",{staticClass:"v-btn--outlined deleteBtn",on:{click:function(a){return t.delDialog(e,s)}}},[t._v("Delete")])],1)],1)],1)})),1),t.dialog?a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{staticClass:"unselectable pa-3"},[a("v-card-title",{staticClass:"text-h5 justify-center"},[t._v("Are you sure? ðŸ˜¬")]),t.hasEnrolments?a("div",[a("v-card-text",{staticClass:"text-center"},[a("span",{staticClass:"text-h4"},[t._v("âš ")])]),a("v-card-text",{staticClass:"text-center"},[a("b",[t._v("This course has enrolments!")])]),a("v-card-text",{staticClass:"text-center"},[t._v("This will "),a("i",[t._v("permanently")]),t._v(" delete the "),a("b",[t._v(t._s(t.clickedCourse.title))]),t._v(" course and "),a("b",[t._v("all enrolments associated with it")]),t._v(" from the API...")])],1):a("div",[a("v-card-text",{staticClass:"text-center"},[t._v("This will "),a("i",[t._v("permanently")]),t._v(" delete the "),a("b",[t._v(t._s(t.clickedCourse.title))]),t._v(" course from the API...")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Go back! ")]),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialog=!1,t.del(t.clickedCourse,t.clickedIndex)}}},[t._v(" Delete it! ")])],1)],1)],1)],1):t._e()],1)},o=[],n=(a("4de4"),a("d3b7"),a("caad"),a("2532"),a("d81d"),a("a434"),a("bc3a")),c=a.n(n),r={name:"CoursesIndex",title:"Courses â€¢ RESTful College",data:function(){return{courses:[],searchQuery:"",dialog:!1,clickedCourse:{},clickedIndex:null,hasEnrolments:!1}},computed:{filtered:function(){var t=this;return this.courses.filter((function(e){return e.title.toLowerCase().includes(t.searchQuery.toLowerCase())}))}},mounted:function(){this.getData()},methods:{getData:function(){var t=this,e=localStorage.getItem("token"),a="https://college-api-mo.herokuapp.com/api/";c.a.get("".concat(a,"courses"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){t.courses=e.data.data})).catch((function(t){}))},view:function(t){this.$router.push({name:"Course Viewer",params:{id:t.id}})},edit:function(t){this.$router.push({name:"Course Editor",params:{id:t.id}})},delDialog:function(t,e){this.dialog=!this.dialog,this.clickedCourse=t,this.clickedIndex=e,0!==t.enrolments.length?this.hasEnrolments=!0:this.hasEnrolments=!1},del:function(t,e){var a=this,s=this,o=localStorage.getItem("token"),n="https://college-api-mo.herokuapp.com/api/";if(0!==t.enrolments.length){var r=t.enrolments.map((function(t){return c.a.delete("".concat(n,"enrolments/").concat(t.id),{headers:{Authorization:"Bearer ".concat(o)}})}));c.a.all(r).then((function(){c.a.delete("".concat(n,"courses/").concat(t.id),{headers:{Authorization:"Bearer ".concat(o)}}).then((function(a){s.courses.splice(e,1),s.toastAlert("Course ".concat(t.title," & all associated enrolments have been deleted successfully!"),"success")})).catch((function(e){s.toastAlert("Course ".concat(t.title," failed to be deleted."),"error")}))})).catch((function(e){a.toastAlert("Course ".concat(t.title," failed to be deleted."),"error")}))}else c.a.delete("".concat(n,"courses/").concat(t.id),{headers:{Authorization:"Bearer ".concat(o)}}).then((function(s){a.courses.splice(e,1),a.toastAlert("Course ".concat(t.title," has been deleted successfully!"),"success")})).catch((function(e){a.toastAlert("Course ".concat(t.title," failed to be deleted."),"error")}))},add:function(){this.$router.push({name:"Add Course"})},toastAlert:function(t,e){this.$root.toast.show({message:t,color:e}),alert(t)}}},i=r,l=a("2877"),d=Object(l["a"])(i,s,o,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0b5fa5.553c0837.js.map