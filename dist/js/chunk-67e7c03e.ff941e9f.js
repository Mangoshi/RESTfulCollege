(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67e7c03e"],{"0f95":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-text-field",{staticClass:"ml-3 mr-3",attrs:{label:"Search Enrolments",color:"accent"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),n("v-btn",{staticClass:"addBtn mt-4 mr-3 float-right",on:{click:function(t){return e.add()}}},[e._v("Add")])],1),n("v-divider",{staticClass:"mt-3"}),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[n("v-switch",{attrs:{label:"Expand All",color:"accent"},model:{value:e.expandToggle,callback:function(t){e.expandToggle=t},expression:"expandToggle"}})],1),n("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[n("v-switch",{attrs:{label:"Filter By Lecturer",color:"accent"},model:{value:e.filterToggle,callback:function(t){e.filterToggle=t},expression:"filterToggle"}})],1),n("v-spacer"),n("div",{staticClass:"mt-7 mr-3"},[n("span",{staticClass:"mr-4 grey--text"},[e._v("Page "+e._s(e.page)+" of "+e._s(e.numberOfPages))]),n("v-btn",{staticClass:"mr-1 black--text",attrs:{dark:"",color:"accent"},on:{click:e.formerPage}},[n("v-icon",[e._v("mdi-chevron-left")])],1),n("v-btn",{staticClass:"ml-1 black--text",attrs:{dark:"",color:"accent"},on:{click:e.nextPage}},[n("v-icon",[e._v("mdi-chevron-right")])],1)],1)],1),n("v-divider",{staticClass:"mb-5"}),n("v-data-iterator",{attrs:{items:e.filtered,"item-key":"id","items-per-page":e.itemsPerPage,"hide-default-footer":"",expanded:e.expanded,page:e.page},on:{"update:page":function(t){e.page=t}},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.items,r=t.isExpanded,i=t.expand;return[n("v-row",e._l(a,(function(t,a){return n("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[n("v-card",[n("v-card-title",[n("h4",[e._v(e._s(t.course.title))]),n("hr"),n("small",[e._v(e._s(t.lecturer.name))])]),n("v-switch",{staticClass:"pl-4 mt-0",attrs:{"input-value":r(t),label:r(t)?"Expanded":"Closed",color:"accent"},on:{change:function(e){return i(t,e)}}}),n("v-divider"),n("v-item-group",{staticClass:"d-flex justify-space-between btnGroup pa-2"},[n("v-btn",{staticClass:"v-btn--outlined viewBtn",on:{click:function(n){return e.view(t)}}},[e._v("View")]),n("v-btn",{staticClass:"v-btn--outlined editBtn",on:{click:function(n){return e.edit(t)}}},[e._v("Edit")]),n("v-btn",{staticClass:"v-btn--outlined deleteBtn",on:{click:function(n){return e.delDialog(t,a)}}},[e._v("Delete")])],1),n("v-divider"),r(t)?n("v-list",{attrs:{dense:""}},[n("v-list-item-subtitle",{staticClass:"ml-4 accent--text"},[e._v("Course")]),n("v-list-item",[n("v-list-item-content",{staticClass:"align-end"},[n("span",[e._v(e._s(t.course.title)+" "),n("sup",[e._v("["+e._s(t.course.id)+"]")])])])],1),n("v-list-item-subtitle",{staticClass:"ml-4 mt-2 accent--text"},[e._v("Lecturer")]),n("v-list-item",[n("v-list-item-content",{staticClass:"align-end"},[n("span",[e._v(e._s(t.lecturer.name)+" "),n("sup",[e._v("["+e._s(t.lecturer.id)+"]")])])])],1),n("v-list-item-subtitle",{staticClass:"ml-4 mt-2 accent--text"},[e._v("Status")]),n("v-list-item",[n("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.status)+" ")])],1),n("v-list-item-subtitle",{staticClass:"ml-4 mt-2 accent--text"},[e._v("Date")]),n("v-list-item",[n("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.date)+" ")])],1),n("v-list-item-subtitle",{staticClass:"ml-4 mt-2 accent--text"},[e._v("Time")]),n("v-list-item",[n("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.time)+" ")])],1)],1):e._e()],1)],1)})),1),e.dialog?n("v-row",{attrs:{justify:"center"}},[n("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"text-h5"},[e._v("Are you sure? ðŸ˜¬")]),n("v-card-text",[e._v("This will permanently delete the "+e._s(e.clickedEnrolment.course.title)+" // "+e._s(e.clickedEnrolment.lecturer.name)+" enrolment from the API...")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Go back! ")]),n("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialog=!1,e.del(e.clickedEnrolment,e.clickedIndex)}}},[e._v(" Delete it! ")])],1)],1)],1)],1):e._e()]}}])})],1)},r=[],i=(n("4de4"),n("d3b7"),n("caad"),n("2532"),n("b0c0"),n("a434"),n("99af"),n("8647")),l={name:"EnrolmentsIndex",components:{},data:function(){return{enrolments:[],searchQuery:"",filterToggle:!1,expandToggle:!1,expand:[],page:1,itemsPerPage:12,dialog:!1,clickedEnrolment:{},clickedIndex:null}},computed:{filtered:function(){var e=this;return this.enrolments.filter((function(t){return e.filterToggle?t.lecturer.name.toLowerCase().includes(e.searchQuery.toLowerCase()):t.course.title.toLowerCase().includes(e.searchQuery.toLowerCase())}))},expanded:function(){return this.expandToggle?this.filtered:[]},numberOfPages:function(){return Math.ceil(this.filtered.length/this.itemsPerPage)}},mounted:function(){this.getData()},methods:{getData:function(){var e=this,t=localStorage.getItem("token");i["a"].get("enrolments",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){console.log("getData() response: ",t.data.data),e.enrolments=t.data.data})).catch((function(e){return console.log("getData() error caught: ",e)}))},view:function(e){this.$router.push({name:"Enrolment Viewer",params:{id:e.id}})},edit:function(e){this.$router.push({name:"Enrolment Editor",params:{id:e.id}})},delDialog:function(e,t){this.dialog=!this.dialog,this.clickedEnrolment=e,console.log("delDialog(enrolment):",e),this.clickedIndex=this.realIndex(t),console.log("delDialog(index):",this.realIndex(t))},del:function(e,t){var n=this;console.log("del() Enrolment data: ",e),console.log("del() Index data: ",t);var a=localStorage.getItem("token");i["a"].delete("enrolments/".concat(e.id),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(a){console.log("del() response: ",a.data.status),n.enrolments.splice(t,1),alert("Enrolment with course: ".concat(e.course.title," / lecturer ").concat(e.lecturer.name," has been deleted successfully!"))})).catch((function(t){console.log("del() error caught: ",t),alert("Enrolment with course: ".concat(e.course.title," / lecturer ").concat(e.lecturer.name," failed to be deleted."))}))},add:function(){this.$router.push({name:"Add Enrolment"})},nextPage:function(){this.page+1<=this.numberOfPages&&(this.page+=1)},formerPage:function(){this.page-1>=1&&(this.page-=1)},realIndex:function(e){var t=e+(this.page-1)*this.itemsPerPage;return t}}},s=l,c=n("2877"),o=Object(c["a"])(s,a,r,!1,null,null,null);t["default"]=o.exports},2532:function(e,t,n){"use strict";var a=n("23e7"),r=n("e330"),i=n("5a34"),l=n("1d80"),s=n("577e"),c=n("ab13"),o=r("".indexOf);a({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~o(s(l(this)),s(i(e)),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,n){var a=n("861d"),r=n("c6b6"),i=n("b622"),l=i("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[l])?!!t:"RegExp"==r(e))}},"5a34":function(e,t,n){var a=n("da84"),r=n("44e7"),i=a.TypeError;e.exports=function(e){if(r(e))throw i("The method doesn't accept regular expressions");return e}},"99af":function(e,t,n){"use strict";var a=n("23e7"),r=n("da84"),i=n("d039"),l=n("e8b5"),s=n("861d"),c=n("7b0b"),o=n("07fa"),d=n("8418"),u=n("65f0"),v=n("1dde"),m=n("b622"),f=n("2d00"),g=m("isConcatSpreadable"),h=9007199254740991,p="Maximum allowed index exceeded",x=r.TypeError,b=f>=51||!i((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),_=v("concat"),k=function(e){if(!s(e))return!1;var t=e[g];return void 0!==t?!!t:l(e)},w=!b||!_;a({target:"Array",proto:!0,forced:w},{concat:function(e){var t,n,a,r,i,l=c(this),s=u(l,0),v=0;for(t=-1,a=arguments.length;t<a;t++)if(i=-1===t?l:arguments[t],k(i)){if(r=o(i),v+r>h)throw x(p);for(n=0;n<r;n++,v++)n in i&&d(s,v,i[n])}else{if(v>=h)throw x(p);d(s,v++,i)}return s.length=v,s}})},a434:function(e,t,n){"use strict";var a=n("23e7"),r=n("da84"),i=n("23cb"),l=n("5926"),s=n("07fa"),c=n("7b0b"),o=n("65f0"),d=n("8418"),u=n("1dde"),v=u("splice"),m=r.TypeError,f=Math.max,g=Math.min,h=9007199254740991,p="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!v},{splice:function(e,t){var n,a,r,u,v,x,b=c(this),_=s(b),k=i(e,_),w=arguments.length;if(0===w?n=a=0:1===w?(n=0,a=_-k):(n=w-2,a=g(f(l(t),0),_-k)),_+n-a>h)throw m(p);for(r=o(b,a),u=0;u<a;u++)v=k+u,v in b&&d(r,u,b[v]);if(r.length=a,n<a){for(u=k;u<_-a;u++)v=u+a,x=u+n,v in b?b[x]=b[v]:delete b[x];for(u=_;u>_-a+n;u--)delete b[u-1]}else if(n>a)for(u=_-a;u>k;u--)v=u+a-1,x=u+n-1,v in b?b[x]=b[v]:delete b[x];for(u=0;u<n;u++)b[u+k]=arguments[u+2];return b.length=_-a+n,r}})},ab13:function(e,t,n){var a=n("b622"),r=a("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(a){}}return!1}},caad:function(e,t,n){"use strict";var a=n("23e7"),r=n("4d64").includes,i=n("44d2");a({target:"Array",proto:!0},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")}}]);
//# sourceMappingURL=chunk-67e7c03e.ff941e9f.js.map