(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c73fc"],{"508c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-text-field",{staticClass:"ml-3 mr-3",attrs:{label:"Search Lecturers",color:"accent"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),a("v-btn",{staticClass:"addBtn mr-3 mt-4 float-right",on:{click:function(t){return e.add()}}},[e._v("Add")])],1),a("v-divider",{staticClass:"mt-3"}),a("v-row",{attrs:{"align-content":"space-between"}},[a("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[a("v-switch",{attrs:{label:"Expand All",color:"accent"},model:{value:e.expandToggle,callback:function(t){e.expandToggle=t},expression:"expandToggle"}})],1),a("v-spacer"),a("div",{staticClass:"mt-7 mr-3"},[a("span",{staticClass:"mr-4 grey--text"},[e._v("Page "+e._s(e.page)+" of "+e._s(e.numberOfPages))]),a("v-btn",{staticClass:"mr-1 black--text",attrs:{dark:"",color:"accent"},on:{click:e.formerPage}},[a("v-icon",[e._v("mdi-chevron-left")])],1),a("v-btn",{staticClass:"ml-1 black--text",attrs:{dark:"",color:"accent"},on:{click:e.nextPage}},[a("v-icon",[e._v("mdi-chevron-right")])],1)],1)],1),a("v-divider",{staticClass:"mb-5"}),a("v-data-iterator",{attrs:{items:e.filtered,"item-key":"id","items-per-page":e.itemsPerPage,"hide-default-footer":"",expanded:e.expanded,page:e.page},on:{"update:page":function(t){e.page=t}},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.items,c=t.isExpanded,i=t.expand;return[a("v-row",e._l(n,(function(t,n){return a("v-col",{key:t.id,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[a("v-card",[a("v-avatar",{staticClass:"float-right"},[a("v-img",{attrs:{src:"https://avatars.dicebear.com/api/initials/"+t.realName+".svg",height:"3em",width:"3em"}})],1),a("v-card-title",[a("router-link",{attrs:{to:{name:"Lecturer Viewer",params:{id:t.id}}}},[e._v(e._s(t.name))])],1),a("v-switch",{staticClass:"pl-4 mt-0",attrs:{"input-value":c(t),label:c(t)?"Expanded":"Closed",color:"accent"},on:{change:function(e){return i(t,e)}}}),a("v-divider"),a("v-item-group",{staticClass:"d-flex justify-space-between btnGroup pa-2"},[a("v-btn",{staticClass:"v-btn--outlined viewBtn",on:{click:function(a){return e.view(t)}}},[e._v("View")]),a("v-btn",{staticClass:"v-btn--outlined editBtn",on:{click:function(a){return e.edit(t)}}},[e._v("Edit")]),a("v-btn",{staticClass:"v-btn--outlined deleteBtn",on:{click:function(a){return e.delDialog(t,n)}}},[e._v("Delete")])],1),a("v-divider"),c(t)?a("v-list",{attrs:{dense:""}},[a("v-list-item-subtitle",{staticClass:"ml-4 accent--text"},[e._v("ID")]),a("v-list-item",[a("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.id)+" ")])],1),a("v-list-item-subtitle",{staticClass:"ml-4 accent--text"},[e._v("Phone")]),a("v-list-item",[a("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.phone)+" ")])],1),a("v-list-item-subtitle",{staticClass:"ml-4 accent--text"},[e._v("Email")]),a("v-list-item",[a("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.email)+" ")])],1),a("v-list-item-subtitle",{staticClass:"ml-4 accent--text"},[e._v("Address")]),a("v-list-item",[a("v-list-item-content",{staticClass:"align-end"},[e._v(" "+e._s(t.address)+" ")])],1)],1):e._e()],1)],1)})),1),e.dialog?a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{staticClass:"unselectable pa-3"},[a("v-card-title",{staticClass:"text-h5 justify-center"},[e._v("Are you sure? ðŸ˜¬")]),e.hasEnrolments?a("div",[a("v-card-text",{staticClass:"text-center"},[a("span",{staticClass:"text-h4"},[e._v("âš ")])]),a("v-card-text",{staticClass:"text-center"},[a("b",[e._v("This lecturer has enrolments!")])]),a("v-card-text",{staticClass:"text-center"},[e._v("This will "),a("i",[e._v("permanently")]),e._v(" delete "),a("b",[e._v(e._s(e.clickedLecturer.name))]),e._v(" and "),a("b",[e._v("all of their enrolments")]),e._v(" from the API...")])],1):a("div",[a("v-card-text",[e._v("This will "),a("i",[e._v("permanently")]),e._v(" delete "),a("b",[e._v(e._s(e.clickedLecturer.name))]),e._v(" from the API...")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v(" Go back! ")]),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(t){e.dialog=!1,e.del(e.clickedLecturer,e.clickedIndex)}}},[e._v(" Delete it! ")])],1)],1)],1)],1):e._e()]}}])})],1)},c=[],i=(a("4de4"),a("d3b7"),a("caad"),a("2532"),a("b0c0"),a("159b"),a("d81d"),a("a434"),a("ac1f"),a("5319"),a("bc3a")),r=a.n(i),s={name:"LecturersIndex",title:"Lecturers â€¢ RESTful College",components:{},data:function(){return{lecturers:[],searchQuery:"",expandToggle:!1,expand:[],page:1,itemsPerPage:12,dialog:!1,clickedLecturer:{},clickedIndex:null,hasEnrolments:!1}},computed:{filtered:function(){var e=this;return this.lecturers.filter((function(t){return t.name.toLowerCase().includes(e.searchQuery.toLowerCase())}))},expanded:function(){return this.expandToggle?this.filtered:[]},numberOfPages:function(){return Math.ceil(this.filtered.length/this.itemsPerPage)}},mounted:function(){this.getData()},methods:{getData:function(){var e=this,t=localStorage.getItem("token"),a="https://college-api-mo.herokuapp.com/api/";r.a.get("".concat(a,"lecturers"),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){var a=t.data.data,n=!0;a.forEach((function(t,a){t.realName=e.nameProcessor(t.name),t.gender=n?"female":"male",n=!n})),e.lecturers=a})).catch((function(e){}))},view:function(e){this.$router.push({name:"Lecturer Viewer",params:{id:e.id}})},edit:function(e){this.$router.push({name:"Lecturer Editor",params:{id:e.id}})},delDialog:function(e,t){this.dialog=!this.dialog,this.clickedLecturer=e,this.clickedIndex=this.realIndex(t),0!==e.enrolments.length?this.hasEnrolments=!0:this.hasEnrolments=!1},del:function(e,t){var a=this,n=localStorage.getItem("token"),c="https://college-api-mo.herokuapp.com/api/";if(0!==e.enrolments.length){var i=e.enrolments.map((function(e){return r.a.delete("".concat(c,"enrolments/").concat(e.id),{headers:{Authorization:"Bearer ".concat(n)}})}));r.a.all(i).then((function(){r.a.delete("".concat(c,"lecturers/").concat(e.id),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(n){a.lecturers.splice(t,1),alert("Lecturer ".concat(e.name," & all their enrolments have been deleted successfully!"))})).catch((function(t){alert("Lecturer ".concat(e.name," failed to be deleted."))}))})).catch((function(t){alert("Lecturer ".concat(e.name," failed to be deleted."))}))}else r.a.delete("".concat(c,"lecturers/").concat(e.id),{headers:{Authorization:"Bearer ".concat(n)}}).then((function(n){a.lecturers.splice(t,1),alert("Lecturer ".concat(e.name," has been deleted successfully!"))})).catch((function(t){alert("Lecturer ".concat(e.name," failed to be deleted."))}))},add:function(){this.$router.push({name:"Add Lecturer"})},nextPage:function(){this.page+1<=this.numberOfPages&&(this.page+=1)},formerPage:function(){this.page-1>=1&&(this.page-=1)},realIndex:function(e){var t=e+(this.page-1)*this.itemsPerPage;return t},nameProcessor:function(e){var t=e.replace(/(.*)\. /,"");return t},genderCheck:function(e){return r.a.get("https://api.genderize.io?name=".concat(e)).then((function(e){e.data.gender})).catch((function(e){}))}}},l=s,o=a("2877"),d=Object(o["a"])(l,n,c,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0c73fc.d37f668b.js.map